<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://blog.ochiba.io').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="Ochiba’s Arch Linux RecipePreface This is a record of the process of installing Arch Linux on a typical computer with UEFI support. If your computer don’t support UEFI, the making partition part might">
<meta property="og:type" content="article">
<meta property="og:title" content="Ochiba&#39;s Arch Linux Recipe">
<meta property="og:url" content="http:&#x2F;&#x2F;blog.ochiba.io&#x2F;2020&#x2F;09&#x2F;17&#x2F;Ochiba&#39;s%20Arch%20Linux%20Recipe&#x2F;index.html">
<meta property="og:site_name" content="Tsukigasaki">
<meta property="og:description" content="Ochiba’s Arch Linux RecipePreface This is a record of the process of installing Arch Linux on a typical computer with UEFI support. If your computer don’t support UEFI, the making partition part might">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-09-17T15:07:53.717Z">
<meta property="article:modified_time" content="2020-09-17T15:14:47.803Z">
<meta property="article:author" content="Tachibana Ochiba">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://blog.ochiba.io/2020/09/17/Ochiba's%20Arch%20Linux%20Recipe/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Ochiba's Arch Linux Recipe | Tsukigasaki</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Tsukigasaki</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">The only easy day was yesterday.</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-fw fa-calendar"></i>日程表</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://blog.ochiba.io/2020/09/17/Ochiba's%20Arch%20Linux%20Recipe/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/global_resources/avatar.jpg">
      <meta itemprop="name" content="Tachibana Ochiba">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tsukigasaki">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Ochiba's Arch Linux Recipe
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-09-17 23:07:53 / 修改时间：23:14:47" itemprop="dateCreated datePublished" datetime="2020-09-17T23:07:53+08:00">2020-09-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Ochiba’s-Arch-Linux-Recipe"><a href="#Ochiba’s-Arch-Linux-Recipe" class="headerlink" title="Ochiba’s Arch Linux Recipe"></a>Ochiba’s Arch Linux Recipe</h1><h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><ul>
<li>This is a record of the process of installing Arch Linux on a typical computer with <code>UEFI</code> support. If your computer don’t support <code>UEFI</code>, the making partition part might be different.<h3 id="What-you-need"><a href="#What-you-need" class="headerlink" title="What you need:"></a>What you need:</h3></li>
<li>A computer to install Arch Linux on connected to internet (<code>target</code>);</li>
<li>A <code>flash drive</code>, preferrably &gt; 8 GiB;</li>
<li>Another computer that’s connected to the internet (<code>computer B</code>)</li>
</ul>
<h2 id="Enter-Arch-Linux-Installation-Environment"><a href="#Enter-Arch-Linux-Installation-Environment" class="headerlink" title="Enter Arch Linux Installation Environment"></a>Enter Arch Linux Installation Environment</h2><h3 id="Prepare-installation-media"><a href="#Prepare-installation-media" class="headerlink" title="Prepare installation media"></a>Prepare installation media</h3><h4 id="On-computer-B"><a href="#On-computer-B" class="headerlink" title="On computer B:"></a>On <code>computer B</code>:</h4><ul>
<li>Download arch linux mirror at <a href="www.archlinux.org">Arch Linux Offical Site</a>;</li>
<li>Use tools such as <code>ventoy</code> or <code>rufus</code> to make a bootable USB of Arch Linux Installation media.<h4 id="On-target"><a href="#On-target" class="headerlink" title="On target:"></a>On <code>target</code>:</h4></li>
<li>Backup all files required;</li>
<li>Go to system firmware and<ul>
<li>Change boot mode to <code>UEFI</code></li>
<li>Calibrate <code>firmware time</code> with <code>UTC</code>;</li>
</ul>
</li>
<li>Disconnect all irrelevant disks other than OS disks if possible;</li>
<li>Connect <code>target</code> to internet;</li>
<li>Boot the <code>target</code> with the <code>flash drive</code> made previously.</li>
<li>Every step afterwards happen on <code>target</code>.</li>
</ul>
<h2 id="Installation-Environment-Time-Setup"><a href="#Installation-Environment-Time-Setup" class="headerlink" title="Installation Environment Time Setup"></a>Installation Environment Time Setup</h2><ul>
<li>Turn ntp on: <code>timedatectl set-ntp true</code>;</li>
<li>Check the service status: <code>timedatectl status</code>.</li>
</ul>
<h2 id="Create-and-Mount-Partitions"><a href="#Create-and-Mount-Partitions" class="headerlink" title="Create and Mount Partitions"></a>Create and Mount Partitions</h2><blockquote>
<p>The following commands would wipe your drive. Ensure everything important on <code>target</code> is backed up.</p>
</blockquote>
<ul>
<li>List disks using <code>fdisk</code> and identify the OS disk on target: <code>fdisk -l</code>. <ul>
<li>The OS disk is usually <code>/dev/sda</code> if it’s the only one in existence.</li>
</ul>
</li>
<li>Use fdisk to create new partition table: <ul>
<li>Enter fdisk: <code>fdisk /dev/sda</code>;</li>
<li>Create a new empty GPT partition table: press <code>g</code> and <code>[ENTER]</code>;</li>
<li>Create a new <code>EFI system partition</code> that’s at least 260 MB: <code>n</code> / <code>[ENTER]</code>/ <code>[ENTER]</code>/ <code>+512M</code>/ <code>[ENTER]</code>/ </li>
<li>Create a new <code>Linux Swap</code> that’s at least 512 MB: <code>n</code> / <code>[ENTER]</code>/ <code>[ENTER]</code>/ <code>+1G</code>/ <code>[ENTER]</code>/ </li>
<li>Create a new <code>Linux x86-64 root</code> that’s whatsever left on your drive large: <code>n</code> / <code>[ENTER]</code>/ <code>[ENTER]</code>/ <code>[ENTER]</code></li>
<li>Change <code>EFI system partition</code> type: <code>t</code>/ <code>1</code>/ <code>1</code>/ <code>[ENTER]</code></li>
<li>Change <code>Linux Swap</code> type: <code>t</code>/ <code>2</code>/ <code>19</code>/ <code>[ENTER]</code></li>
<li>Write changes to disk: <code>w</code></li>
</ul>
</li>
<li>Format these partitions<ul>
<li>Format EFI system partition to FAT32: <code>mkfs.fat -F 32 /dev/sda1</code></li>
<li>Format Linux x86-64 root to ext4: <code>mkfs.ext4 /dev/sda3</code></li>
<li>Initialize Linux Swap:    <figure class="highlight plain"><figcaption><span>/dev/swap_partition```  </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#96;&#96;&#96;swapon &#x2F;dev&#x2F;swap_partition</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>Mount Linux x86-64 root: <code>mount /dev/sda3 /mnt</code></li>
</ul>
<h2 id="Install-base-system"><a href="#Install-base-system" class="headerlink" title="Install base system"></a>Install base system</h2><ul>
<li>Run pacstrap script: <code>pacstrap /mnt base linux linux-firmware</code></li>
<li>Generate an fstab file: <code>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</code></li>
</ul>
<h2 id="Use-chroot-to-change-root-environment-to-the-installed-system"><a href="#Use-chroot-to-change-root-environment-to-the-installed-system" class="headerlink" title="Use chroot to change root environment to the installed system"></a>Use chroot to change root environment to the installed system</h2><blockquote>
<p>From now on root is changed to the new system. If for some reason you need to go back to a recover environment, also use this command.</p>
</blockquote>
<ul>
<li>Change root: <code>arch-chroot /mnt</code></li>
</ul>
<h2 id="Install-GRUB"><a href="#Install-GRUB" class="headerlink" title="Install GRUB"></a>Install GRUB</h2><ul>
<li>Install GRUB and nano the text editor: <code>pacman -S grub efibootmgr nano intel-ucode amd-ucode</code>;</li>
<li>Create mounting point of EFI system partition: <code>mkdir efi</code>;</li>
<li>Mount EFI system partition: <code>mount /dev/sda1 /efi</code></li>
<li>Install GRUB: <code>grub-install --target=x86_64-efi --efi-directory=/efi --bootloader-id=GRUB</code></li>
<li>Generate grub.cfg: <code>grub-mkconfig -o /boot/grub/grub.cfg</code></li>
</ul>
<h2 id="System-Time-and-Locale-related-tasks"><a href="#System-Time-and-Locale-related-tasks" class="headerlink" title="System Time and Locale related tasks"></a>System Time and Locale related tasks</h2><blockquote>
<p>This section setups system locale. It’s set to en-GB to prevent charset issues in tty. For Chinese user interface, you should setup USER LOCALE, NOT system locale.</p>
</blockquote>
<ul>
<li>Set timezone:  <figure class="highlight plain"><figcaption><span>-sf</span><a href="/usr/share/zoneinfo/Asia/Shanghai">/etc/localtime```  </a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#96;&#96;&#96;hwclock --systohc</span><br></pre></td></tr></table></figure></li>
<li>Set locale: Edit <code>/etc/locale.gen</code> and uncomment <code>en-GB.UTF-8 UTF-8</code></li>
<li>Generate locale: <code>locale-gen</code></li>
</ul>
<h2 id="Network-related-tasks"><a href="#Network-related-tasks" class="headerlink" title="Network related tasks"></a>Network related tasks</h2><ul>
<li><p>Install NetworkManager and iwd: <code>pacman -S iwd networkmanager</code></p>
<h3 id="If-wired-and-DHCP"><a href="#If-wired-and-DHCP" class="headerlink" title="If wired and DHCP:"></a>If wired and DHCP:</h3></li>
<li><p>Find your network interface: <code>ip address show</code></p>
<ul>
<li>In the following example output, network interface is <code>eth1</code>:  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">12: eth1: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1500 group default qlen 1                                                            link&#x2F;ether 00:50:56:c0:00:01                                                                                            inet 192.168.88.1&#x2F;24 brd 192.168.88.255 scope global dynamic                                                               valid_lft forever preferred_lft forever                                                                              inet6 fe80::79c6:bc71:aa49:fbf6&#x2F;64 scope link dynamic                                                                      valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Set Hostname: <code>[your hostname] &gt; /etc/hostname</code></p>
</li>
<li><p>Modify <code>hosts file</code>: edit <code>/etc/hosts</code> with:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1	localhost</span><br><span class="line">::1		localhost</span><br><span class="line">127.0.1.1	[your hostname].localdomain	[your hostname]</span><br></pre></td></tr></table></figure></li>
<li><p>Set configuration file: modify <code>/etc/systemd/network/20-wired.network</code> with:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[Match]</span><br><span class="line">Name&#x3D;[eth1] # Change [eth1] with your network interface</span><br><span class="line"></span><br><span class="line">[Network]</span><br><span class="line">DHCP&#x3D;yes</span><br></pre></td></tr></table></figure></li>
<li><p>Enable network manager: <code>systemctl enable NetworkManager</code></p>
<h3 id="If-wireless"><a href="#If-wireless" class="headerlink" title="If wireless:"></a>If wireless:</h3></li>
<li><p>Start <code>iwctl</code>: <code>iwctl</code></p>
</li>
<li><p>Find your wlan card ID: <code>device list</code></p>
</li>
<li><p>Scan for networks: <code>station wlan0 scan</code></p>
</li>
<li><p>List all avaliable networks: <code>station wlan0 get-networks</code></p>
</li>
<li><p>Connect to network: <code>station wlan0e connect my_wifi</code></p>
</li>
<li><p>Enable iwd: <code>systemctl enable iwd.service</code></p>
</li>
</ul>
<h2 id="User-related-tasks"><a href="#User-related-tasks" class="headerlink" title="User related tasks"></a>User related tasks</h2><ul>
<li>Set root password: <code>passwd</code>;</li>
<li>Install sudo and nano:  <code>pacman -S sudo</code>;</li>
<li>Setup sudo: Edit file file and uncomment to allow all memners of group wheel to execute any command<ul>
<li>run <code>EDITOR=nano visudo</code>;</li>
<li>Uncomment line <code># %wheel ALL=(ALL) ALL</code></li>
</ul>
</li>
<li>Create a user account: (Change <code>ochiba</code> to your preferred username): <code>useradd -m -G wheel ochiba</code>;</li>
<li>Set a password for the user (Change <code>ochiba</code> to your preferred username): <code>passwd ochiba</code>.</li>
</ul>
<h2 id="Install-Desktop-Environment"><a href="#Install-Desktop-Environment" class="headerlink" title="Install Desktop Environment"></a>Install Desktop Environment</h2><ul>
<li>Install xorg:  <code>pacman -S xorg</code>;</li>
<li>Install KDE Plasma:  <code>pacman -S kde-applications plasma sddm</code>;</li>
<li>Enable display manager: <code>systamctl enable sddm</code>.</li>
</ul>
<h2 id="Boot-into-Arch-Linux"><a href="#Boot-into-Arch-Linux" class="headerlink" title="Boot into Arch Linux"></a>Boot into Arch Linux</h2><ul>
<li>Exit chroot mode: <code>exit</code>;</li>
<li>Shutdown <code>target</code>;</li>
<li>Reconnect other disks if you disconected them in preparation stage;</li>
<li>Remove <code>flash drive</code>;</li>
<li>Start <code>target</code>, you’ll be on Arch desktop.</li>
</ul>
<h2 id="Post-Install"><a href="#Post-Install" class="headerlink" title="Post Install"></a>Post Install</h2><h3 id="Thunderbolt"><a href="#Thunderbolt" class="headerlink" title="Thunderbolt"></a>Thunderbolt</h3><ul>
<li>Where thunderbolt is applicable: <code>sudo pacman -S bolt</code></li>
<li>Obtain device UID: <code>boltctl info</code></li>
<li>Allow automatic connection: <code>boltctl enroll --policy auto [thunderbolts设备 UID]</code></li>
<li>Disconnect and connect thunderbolt device.<h3 id="Allow-mounting-other-local-drives"><a href="#Allow-mounting-other-local-drives" class="headerlink" title="Allow mounting other local drives:"></a>Allow mounting other local drives:</h3></li>
<li>Login as root: <code>su root</code></li>
<li></li>
</ul>
<h3 id="Localization"><a href="#Localization" class="headerlink" title="Localization"></a>Localization</h3><ul>
<li>Install Chinese fonts: <code>pacman -S noto-fonts noto-fonts-cjk noto-fonts-emoji adobe-source-han-sans-otc-fonts wqy-microhei wqy-zenhei</code></li>
<li>Change user-level locale: Modify <code>~/.config/locale.conf</code> to:    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">LANG&#x3D;zh_CN.UTF-8</span><br><span class="line">LC_CTYPE&#x3D;&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_NUMERIC&#x3D;&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_TIME&#x3D;&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_COLLATE&#x3D;&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_MONETARY&#x3D;&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_MESSAGES&#x3D;&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_PAPER&#x3D;&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_NAME&#x3D;&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_ADDRESS&#x3D;&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_TELEPHONE&#x3D;&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_MEASUREMENT&#x3D;&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_IDENTIFICATION&#x3D;&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_ALL&#x3D;</span><br></pre></td></tr></table></figure></li>
<li>Add Archlinuxcn source:<ul>
<li>Append <code>/etc/pacman.conf</code> with:  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[archlinuxcn]</span><br><span class="line">Server &#x3D; https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;archlinuxcn&#x2F;$arch</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>Enable Multilib:<ul>
<li>Uncomment the following in <code>/etc/pacman.conf</code>:  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[multilib]</span><br><span class="line">Include &#x3D; &#x2F;etc&#x2F;pacman.d&#x2F;mirrorlist</span><br></pre></td></tr></table></figure></li>
<li>Update: <code>sudo pacman -Syu</code></li>
<li>Install <code>archlinuxcn-keyring</code> package: <code>sudo pacman -S archlinuxcn-ring</code></li>
</ul>
</li>
<li>Install Chinese IME<ul>
<li>Install  <code>fcitx5</code> framework and relevant IMEs`: <code>sudo pacman -S fcitx5-im fcitx5-rime</code></li>
<li>Append <code>~/.pam_environment</code> with:  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INPUT_METHOD  DEFAULT&#x3D;fcitx5</span><br><span class="line">GTK_IM_MODULE DEFAULT&#x3D;fcitx5</span><br><span class="line">QT_IM_MODULE  DEFAULT&#x3D;fcitx5</span><br><span class="line">XMODIFIERS    DEFAULT&#x3D;\@im&#x3D;fcitx5</span><br></pre></td></tr></table></figure></li>
<li>Copy <code>self-start batch</code> to <code>~/.config/autostart</code>: <code>cp /usr/share/applications/fcitx5.desktop ~/.config/autostart/</code></li>
<li>Make the script executable: <code>chmod +x ~/.config/autostart/fcitx5.desktop</code></li>
</ul>
</li>
<li>Set correct display fonts<ul>
<li>Install fonts:<code>sudo pacman -S ttf-roboto noto-fonts noto-fonts-cjk adobe-source-han-sans-cn-fonts adobe-source-han-serif-cn-fonts ttf-dejavu</code></li>
<li>Modify <code>/etc/fonts/local.conf</code> as follows:  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">fontconfig</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">"fonts.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">fontconfig</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">its:rules</span> <span class="attr">xmlns:its</span>=<span class="string">"http://www.w3.org/2005/11/its"</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">its:translateRule</span></span></span><br><span class="line"><span class="tag">    <span class="attr">translate</span>=<span class="string">"no"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">selector</span>=<span class="string">"/fontconfig/*[not(self::description)]"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">its:rules</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">description</span>&gt;</span>Android Font Config<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Font directory list --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dir</span>&gt;</span>/usr/share/fonts<span class="tag">&lt;/<span class="name">dir</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dir</span>&gt;</span>/usr/local/share/fonts<span class="tag">&lt;/<span class="name">dir</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dir</span> <span class="attr">prefix</span>=<span class="string">"xdg"</span>&gt;</span>fonts<span class="tag">&lt;/<span class="name">dir</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- the following element will be removed in the future --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dir</span>&gt;</span>~/.fonts<span class="tag">&lt;/<span class="name">dir</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 关闭内嵌点阵字体 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">"font"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"embeddedbitmap"</span> <span class="attr">mode</span>=<span class="string">"assign"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>false<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 英文默认字体使用 Roboto 和 Noto Serif ,终端使用 DejaVu Sans Mono. --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">"any"</span> <span class="attr">name</span>=<span class="string">"family"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>serif<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"family"</span> <span class="attr">mode</span>=<span class="string">"prepend"</span> <span class="attr">binding</span>=<span class="string">"strong"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Noto Serif<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">"pattern"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">"any"</span> <span class="attr">name</span>=<span class="string">"family"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>sans-serif<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"family"</span> <span class="attr">mode</span>=<span class="string">"prepend"</span> <span class="attr">binding</span>=<span class="string">"strong"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Roboto<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">"pattern"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">"any"</span> <span class="attr">name</span>=<span class="string">"family"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>monospace<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"family"</span> <span class="attr">mode</span>=<span class="string">"prepend"</span> <span class="attr">binding</span>=<span class="string">"strong"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>DejaVu Sans Mono<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 中文默认字体使用思源黑体和思源宋体,不使用　Noto Sans CJK SC 是因为这个字体会在特定情况下显示片假字. --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">name</span>=<span class="string">"lang"</span> <span class="attr">compare</span>=<span class="string">"contains"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>zh<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">name</span>=<span class="string">"family"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>serif<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"family"</span> <span class="attr">mode</span>=<span class="string">"prepend"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Source Han Serif CN<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">name</span>=<span class="string">"lang"</span> <span class="attr">compare</span>=<span class="string">"contains"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>zh<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">name</span>=<span class="string">"family"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>sans-serif<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"family"</span> <span class="attr">mode</span>=<span class="string">"prepend"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Source Han Sans CN<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">name</span>=<span class="string">"lang"</span> <span class="attr">compare</span>=<span class="string">"contains"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>zh<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">name</span>=<span class="string">"family"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>monospace<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"family"</span> <span class="attr">mode</span>=<span class="string">"prepend"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Noto Sans Mono CJK SC<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Windows &amp; Linux Chinese fonts. --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 把所有常见的中文字体映射到思源黑体和思源宋体，这样当这些字体未安装时会使用思源黑体和思源宋体.</span></span><br><span class="line"><span class="comment">解决特定程序指定使用某字体，并且在字体不存在情况下不会使用fallback字体导致中文显示不正常的情况. --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">"pattern"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">"any"</span> <span class="attr">name</span>=<span class="string">"family"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>WenQuanYi Zen Hei<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"family"</span> <span class="attr">mode</span>=<span class="string">"assign"</span> <span class="attr">binding</span>=<span class="string">"same"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Source Han Sans CN<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">"pattern"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">"any"</span> <span class="attr">name</span>=<span class="string">"family"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>WenQuanYi Micro Hei<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"family"</span> <span class="attr">mode</span>=<span class="string">"assign"</span> <span class="attr">binding</span>=<span class="string">"same"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Source Han Sans CN<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">"pattern"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">"any"</span> <span class="attr">name</span>=<span class="string">"family"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>WenQuanYi Micro Hei Light<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"family"</span> <span class="attr">mode</span>=<span class="string">"assign"</span> <span class="attr">binding</span>=<span class="string">"same"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Source Han Sans CN<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">"pattern"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">"any"</span> <span class="attr">name</span>=<span class="string">"family"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Microsoft YaHei<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"family"</span> <span class="attr">mode</span>=<span class="string">"assign"</span> <span class="attr">binding</span>=<span class="string">"same"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Source Han Sans CN<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">"pattern"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">"any"</span> <span class="attr">name</span>=<span class="string">"family"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>SimHei<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"family"</span> <span class="attr">mode</span>=<span class="string">"assign"</span> <span class="attr">binding</span>=<span class="string">"same"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Source Han Sans CN<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">"pattern"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">"any"</span> <span class="attr">name</span>=<span class="string">"family"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>SimSun<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"family"</span> <span class="attr">mode</span>=<span class="string">"assign"</span> <span class="attr">binding</span>=<span class="string">"same"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Source Han Serif CN<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">"pattern"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">"any"</span> <span class="attr">name</span>=<span class="string">"family"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>SimSun-18030<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"family"</span> <span class="attr">mode</span>=<span class="string">"assign"</span> <span class="attr">binding</span>=<span class="string">"same"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Source Han Serif CN<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Load local system customization file --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">ignore_missing</span>=<span class="string">"yes"</span>&gt;</span>conf.d<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Font cache directory list --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">cachedir</span>&gt;</span>/var/cache/fontconfig<span class="tag">&lt;/<span class="name">cachedir</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cachedir</span> <span class="attr">prefix</span>=<span class="string">"xdg"</span>&gt;</span>fontconfig<span class="tag">&lt;/<span class="name">cachedir</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- the following element will be removed in the future --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cachedir</span>&gt;</span>~/.fontconfig<span class="tag">&lt;/<span class="name">cachedir</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Rescan configuration every 30 seconds when FcFontSetList is called --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rescan</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">int</span>&gt;</span>30<span class="tag">&lt;/<span class="name">int</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rescan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">fontconfig</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="Some-other-life-quality-improvements"><a href="#Some-other-life-quality-improvements" class="headerlink" title="Some other life quality improvements"></a>Some other life quality improvements</h3><ul>
<li>Install <code>yay</code>, the AUR automation tool</li>
<li>Install <code>tlp</code> when using a laptop<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h2></li>
<li><a href="https://wiki.archlinux.org/index.php/installation_guide" target="_blank" rel="noopener">Installation Guide</a></li>
<li><a href="https://blog.yoitsu.moe/arch-linux/installing_arch_linux_for_complete_newbies.html" target="_blank" rel="noopener">给 GNU/Linux 萌新的 Arch Linux 安装指南 rev.B</a></li>
<li><a href="https://mirrors.ustc.edu.cn/help/archlinuxcn.html" target="_blank" rel="noopener">Arch Linux CN 源使用帮助</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Fcitx5_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" target="_blank" rel="noopener">Fcitx5 (简体中文)</a></li>
<li><a href="https://wiki.archlinux.org/index.php/GRUB" target="_blank" rel="noopener">GRUB-Archwiki</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Systemd-networkd" target="_blank" rel="noopener">systemd-networkd-Archwiki</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Network_configuration#Network_interfaces" target="_blank" rel="noopener">Network configuration-Archwiki</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Font_Configuration_(简体中文)/Chinese_(简体中文)" target="_blank" rel="noopener">Font Configuration (简体中文)/Chinese (简体中文)</a></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/12/18/excel-text-operators/" rel="prev" title="MS excel 常用的文本操作函数">
      <i class="fa fa-chevron-left"></i> MS excel 常用的文本操作函数
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Ochiba’s-Arch-Linux-Recipe"><span class="nav-number">1.</span> <span class="nav-text">Ochiba’s Arch Linux Recipe</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Preface"><span class="nav-number">1.1.</span> <span class="nav-text">Preface</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#What-you-need"><span class="nav-number">1.1.1.</span> <span class="nav-text">What you need:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Enter-Arch-Linux-Installation-Environment"><span class="nav-number">1.2.</span> <span class="nav-text">Enter Arch Linux Installation Environment</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Prepare-installation-media"><span class="nav-number">1.2.1.</span> <span class="nav-text">Prepare installation media</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#On-computer-B"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">On computer B:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#On-target"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">On target:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Installation-Environment-Time-Setup"><span class="nav-number">1.3.</span> <span class="nav-text">Installation Environment Time Setup</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Create-and-Mount-Partitions"><span class="nav-number">1.4.</span> <span class="nav-text">Create and Mount Partitions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Install-base-system"><span class="nav-number">1.5.</span> <span class="nav-text">Install base system</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Use-chroot-to-change-root-environment-to-the-installed-system"><span class="nav-number">1.6.</span> <span class="nav-text">Use chroot to change root environment to the installed system</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Install-GRUB"><span class="nav-number">1.7.</span> <span class="nav-text">Install GRUB</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#System-Time-and-Locale-related-tasks"><span class="nav-number">1.8.</span> <span class="nav-text">System Time and Locale related tasks</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Network-related-tasks"><span class="nav-number">1.9.</span> <span class="nav-text">Network related tasks</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#If-wired-and-DHCP"><span class="nav-number">1.9.1.</span> <span class="nav-text">If wired and DHCP:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#If-wireless"><span class="nav-number">1.9.2.</span> <span class="nav-text">If wireless:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#User-related-tasks"><span class="nav-number">1.10.</span> <span class="nav-text">User related tasks</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Install-Desktop-Environment"><span class="nav-number">1.11.</span> <span class="nav-text">Install Desktop Environment</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Boot-into-Arch-Linux"><span class="nav-number">1.12.</span> <span class="nav-text">Boot into Arch Linux</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Post-Install"><span class="nav-number">1.13.</span> <span class="nav-text">Post Install</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Thunderbolt"><span class="nav-number">1.13.1.</span> <span class="nav-text">Thunderbolt</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Allow-mounting-other-local-drives"><span class="nav-number">1.13.2.</span> <span class="nav-text">Allow mounting other local drives:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Localization"><span class="nav-number">1.13.3.</span> <span class="nav-text">Localization</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Some-other-life-quality-improvements"><span class="nav-number">1.13.4.</span> <span class="nav-text">Some other life quality improvements</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference"><span class="nav-number">1.14.</span> <span class="nav-text">Reference:</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Tachibana Ochiba"
      src="/global_resources/avatar.jpg">
  <p class="site-author-name" itemprop="name">Tachibana Ochiba</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:contact@ochiba.io" title="E-Mail → mailto:contact@ochiba.io" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/TachibanaOchiba" title="Telegram → https:&#x2F;&#x2F;t.me&#x2F;TachibanaOchiba" rel="noopener" target="_blank"><i class="fa fa-fw fa-telegram"></i>Telegram</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tachibana Ochiba</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.1.1
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.6.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
